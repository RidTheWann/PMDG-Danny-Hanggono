"use strict";(()=>{var t={};t.id=20,t.ids=[20],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},513:(t,e,a)=>{a.r(e),a.d(e,{headerHooks:()=>m,originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>b});var r={};a.r(r),a.d(r,{GET:()=>h,revalidate:()=>l});var o=a(5419),n=a(9108),s=a(9678),i=a(8070);let l=0,u=null,d=0;async function h(t){try{let t;if(u&&Date.now()-d<3e4)return i.Z.json(u);let e=new Date,a=e.getMonth()+1,r=e.getFullYear(),o=e.toISOString().split("T")[0],n=process.env.GOOGLE_SHEETS_URL;if(!n)throw Error("Google Sheets URL not configured");let s=new AbortController,l=setTimeout(()=>s.abort(),1e4);try{t=await fetch(`${n}?action=get&month=${a}&year=${r}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store",signal:s.signal})}catch(t){if("AbortError"===t.name)return i.Z.json({error:"Timeout saat mengambil data Google Sheets"},{status:504});throw t}finally{clearTimeout(l)}if(!t.ok)throw Error("Failed to fetch data from Google Sheets");let h=((await t.json()).data||[]).slice(1),c=0,p=0,g=0,f=0,m=0;h.forEach(t=>{if(0===t.length)return;let e=t[0]||"",a=t[1]||"",r=t[5]||"";if(p++,e&&e.includes(o)){c++;let t=parseInt(a)||0;t>g&&(g=t)}"BPJS"===r?f++:"UMUM"===r&&m++});let b={totalPasienHariIni:c,totalPasienBulanIni:p,antreanTerakhir:g,pasiенBPJS:f,pasienUmum:m};return u=b,d=Date.now(),i.Z.json(b)}catch(t){return i.Z.json({error:"Failed to fetch dashboard stats"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/dashboard-stats/route",pathname:"/api/dashboard-stats",filename:"route",bundlePath:"app/api/dashboard-stats/route"},resolvedPagePath:"D:\\PMDG-Danny-Hanggono\\app\\api\\dashboard-stats\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:f,headerHooks:m,staticGenerationBailout:b}=c,w="/api/dashboard-stats/route";function v(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),r=e.X(0,[638,206],()=>a(513));module.exports=r})();