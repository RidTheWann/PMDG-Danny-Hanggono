"use strict";(()=>{var t={};t.id=20,t.ids=[20],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9890:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>f,originalPathname:()=>b,patchFetch:()=>S,requestAsyncStorage:()=>p,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var a={};r.r(a),r.d(a,{GET:()=>c,revalidate:()=>l});var o=r(5419),s=r(9108),n=r(9678),i=r(8070);let l=0,u=null,d=0;async function c(){try{let t;if(u&&Date.now()-d<3e4)return i.Z.json(u);let e=new Date,r=e.getMonth()+1,a=e.getFullYear(),o=e.toISOString().split("T")[0],s="https://script.google.com/macros/s/AKfycbxnyacmLOW4Ts93_S56wLJj1i4eT76sm1SvJhXu8w-MAmyAtj9DPtoaY28mvD9OkmD2/exec";if(!s)throw Error("Google Sheets URL not configured");let n=new AbortController,l=setTimeout(()=>n.abort(),1e4);try{t=await fetch(`${s}?action=get&month=${r}&year=${a}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store",signal:n.signal})}catch(t){if(t instanceof Error&&"AbortError"===t.name)return i.Z.json({error:"Timeout saat mengambil data Google Sheets"},{status:504});throw t}finally{clearTimeout(l)}if(!t.ok)throw Error("Failed to fetch data from Google Sheets");let c=((await t.json()).data||[]).slice(1),h=0,p=0,m=0,g=0,f=0;c.forEach(t=>{let e=String(t[0]??""),r=String(t[1]??""),a=String(t[5]??"");if(e&&e.includes(o)){h++;let t=parseInt(r)||0;t>m&&(m=t)}"BPJS"===a?g++:"UMUM"===a&&f++,p++});let w={totalPasienHariIni:h,totalPasienBulanIni:p,antreanTerakhir:m,pasiенBPJS:g,pasienUmum:f};return u=w,d=Date.now(),i.Z.json(w)}catch(t){return i.Z.json({error:"Failed to fetch dashboard stats"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/dashboard-stats/route",pathname:"/api/dashboard-stats",filename:"route",bundlePath:"app/api/dashboard-stats/route"},resolvedPagePath:"C:\\Users\\putra\\Downloads\\project-next-praktek\\app\\api\\dashboard-stats\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:f,staticGenerationBailout:w}=h,b="/api/dashboard-stats/route";function S(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[638,206],()=>r(9890));module.exports=a})();