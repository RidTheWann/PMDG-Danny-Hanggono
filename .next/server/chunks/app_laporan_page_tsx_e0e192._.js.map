{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/app/laporan/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { ArrowLeft, FileText, Download, Calendar, TrendingUp, Users, DollarSign, Activity } from 'lucide-react';\n\ninterface ReportData {\n  date: string;\n  totalPatients: number;\n  bpjsPatients: number;\n  umumPatients: number;\n  treatments: {\n    [key: string]: number;\n  };\n}\n\ninterface MonthlyStats {\n  totalPatients: number;\n  bpjsPatients: number;\n  umumPatients: number;\n  averagePerDay: number;\n  mostPopularTreatment: string;\n  dailyData: ReportData[];\n}\n\nexport default function Laporan() {\n  const [monthlyStats, setMonthlyStats] = useState<MonthlyStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedMonth, setSelectedMonth] = useState((new Date().getMonth() + 1).toString());\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear().toString());\n\n  useEffect(() => {\n    fetchReportData();\n  }, [selectedMonth, selectedYear]);\n\n  const fetchReportData = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/reports?month=${selectedMonth}&year=${selectedYear}`);\n      if (response.ok) {\n        const data = await response.json();\n        setMonthlyStats(data);\n      }\n    } catch (error) {\n      console.error('Error fetching report data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  \n\n  const getMonthName = (month: string) => {\n    const months = [\n      'Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',\n      'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'\n    ];\n    return months[parseInt(month) - 1] || '';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Memuat laporan...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-soft border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <Link\n                href=\"/\"\n                className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n                <span>Kembali</span>\n              </Link>\n              <div className=\"h-6 w-px bg-gray-300\"></div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900\">Laporan</h1>\n                <p className=\"text-sm text-gray-500\">Laporan harian dan bulanan</p>\n              </div>\n            </div>\n            <button className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors btn-hover\">\n              <Download className=\"w-4 h-4\" />\n              <span>Export PDF</span>\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Period Selection */}\n        <div className=\"bg-white rounded-xl shadow-soft border border-gray-100 p-6 mb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Calendar className=\"w-5 h-5 text-blue-600\" />\n              <h2 className=\"text-lg font-semibold text-gray-900\">Periode Laporan</h2>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <select\n                value={selectedMonth}\n                onChange={(e) => setSelectedMonth(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus transition-all\"\n              >\n                {Array.from({ length: 12 }, (_, i) => (\n                  <option key={i + 1} value={i + 1}>\n                    {new Date(0, i).toLocaleDateString('id-ID', { month: 'long' })}\n                  </option>\n                ))}\n              </select>\n              \n              <select\n                value={selectedYear}\n                onChange={(e) => setSelectedYear(e.target.value)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus transition-all\"\n              >\n                {Array.from({ length: 5 }, (_, i) => {\n                  const year = new Date().getFullYear() - 2 + i;\n                  return (\n                    <option key={year} value={year}>\n                      {year}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {monthlyStats && (\n          <>\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n              <div className=\"bg-white rounded-xl shadow-soft p-6 border border-gray-100 fade-in\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600 mb-1\">Total Pasien</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">{monthlyStats.totalPatients}</p>\n                  </div>\n                  <div className=\"bg-blue-50 p-3 rounded-lg\">\n                    <Users className=\"w-6 h-6 text-blue-600\" />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-soft p-6 border border-gray-100 fade-in\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600 mb-1\">Pasien BPJS</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {monthlyStats.bpjsPatients}\n                    </p>\n                  </div>\n                  <div className=\"bg-green-50 p-3 rounded-lg\">\n                    <Users className=\"w-6 h-6 text-green-600\" />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-soft p-6 border border-gray-100 fade-in\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600 mb-1\">Rata-rata/Hari</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {Math.round(monthlyStats.averagePerDay)}\n                    </p>\n                  </div>\n                  <div className=\"bg-purple-50 p-3 rounded-lg\">\n                    <TrendingUp className=\"w-6 h-6 text-purple-600\" />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-white rounded-xl shadow-soft p-6 border border-gray-100 fade-in\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-600 mb-1\">Pasien UMUM</p>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {monthlyStats.umumPatients}\n                    </p>\n                  </div>\n                  <div className=\"bg-orange-50 p-3 rounded-lg\">\n                    <Users className=\"w-6 h-6 text-orange-600\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Daily Report Table */}\n            <div className=\"bg-white rounded-xl shadow-soft border border-gray-100 overflow-hidden\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">\n                  Laporan Harian - {getMonthName(selectedMonth)} {selectedYear}\n                </h3>\n              </div>\n              \n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full table-auto\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Tanggal\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Jumlah Pasien\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        BPJS / UMUM\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Tindakan Terbanyak\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {monthlyStats.dailyData.length === 0 ? (\n                      <tr>\n                        <td colSpan={4} className=\"px-6 py-12 text-center text-gray-500\">\n                          <div className=\"flex flex-col items-center\">\n                            <FileText className=\"w-12 h-12 text-gray-300 mb-4\" />\n                            <p className=\"text-lg font-medium\">Tidak ada data</p>\n                            <p className=\"text-sm\">Belum ada data untuk periode ini</p>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : (\n                      monthlyStats.dailyData.map((day, index) => (\n                        <tr key={index} className=\"hover:bg-gray-50 transition-colors\">\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                            {new Date(day.date).toLocaleDateString('id-ID', {\n                              weekday: 'long',\n                              day: 'numeric',\n                              month: 'long'\n                            })}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                            {day.totalPatients} pasien\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {day.bpjsPatients} / {day.umumPatients}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {Object.keys(day.treatments).length > 0 \n                              ? Object.entries(day.treatments)\n                                  .sort(([,a], [,b]) => b - a)[0]?.[0] || '-'\n                              : '-'\n                            }\n                          </td>\n                        </tr>\n                      ))\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}